<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" {{- if eq site.Language.LanguageDirection "rtl" }} dir="rtl" {{- end }}>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="generator" content="Hugo (Ash)"/>

        <script>(function(){try{var k='theme';var s=localStorage.getItem(k);var t=s?s:((window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)?'dark':'light');document.documentElement.setAttribute('data-theme',t);}catch(e){}})();</script>
        <meta name="color-scheme" content="light dark"/>
        <link rel="stylesheet" type="text/css" href="{{ absURL `css/style.css` }}"/>
        {{ with site.Params.fontAwesomeURL }}
        <link rel="stylesheet" href="{{ . }}"/>
        {{ end }}

        {{ if .Params.canonicalUrl }}
        <link rel="canonical" href="{{ .Params.canonicalUrl }}">
        {{ else }}
        <link rel="canonical" href="{{ .Permalink }}">
        {{ end }}

        {{ with .Params.author | compare.Default .Site.Params.author }}
          {{- $author := . -}}
          {{- if reflect.IsSlice . -}}
            {{- $author = collections.Delimit . ", " | transform.Plainify -}}
          {{- end -}}
        <meta name="author" content="{{ $author }}">
        {{ end }}

        <title>{{ block "title" . }}{{ with .Params.Title }}{{ . }} | {{ end }}{{ .Site.Title }}{{ end }}</title>

        {{ if .Site.Params.favicon }}
        <link rel="shortcut icon" href="{{ urls.RelURL ($.Site.Params.favicon) }}" type="image/x-icon" />
        {{ end }}


        {{ if .OutputFormats.Get "RSS" }}
        {{ with .OutputFormats.Get "RSS" }}
          <link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" />
          <link href="{{ .RelPermalink }}" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}" />
          {{ end }}
        {{ end }}
    </head>
    <body>
        {{ block "header" . }}{{ partials.IncludeCached "header.html" . }}{{ end }}
        <div id="wrapper">
            <div id="main-container">
                <div id="content">
                    <main>
                        {{ block "main" . }}{{ end }}
                    </main>
                </div>
                {{/* Sidebar (enabled by default; can be disabled via params) */}}
                {{ $enabled := true }}
                {{ with site.Params.sidebar }}
                  {{ $enabled = .enable | default true }}
                {{ end }}
                {{ if $enabled }}
                  {{ partial "sidebar.html" . }}
                {{ end }}
            </div>
        </div>
        {{ block "footer" . }}{{ partials.IncludeCached "footer.html" . }}{{ end }}
        <script>
        (function(){
          var KEY='theme';
          var doc=document.documentElement;
          var btn=document.getElementById('theme-toggle');
          function setTheme(t, persist){
            doc.setAttribute('data-theme', t);
            if(btn){
              btn.setAttribute('aria-pressed', String(t==='dark'));
              btn.textContent = t==='dark' ? '‚òÄÔ∏è' : 'üåô';
              btn.title = 'Prze≈ÇƒÖcz motyw (obecnie: ' + (t==='dark'?'ciemny':'jasny') + ')';
            }
            if(persist){
              try{ localStorage.setItem(KEY, t); }catch(e){}
            }
          }
          function getStored(){ try{ return localStorage.getItem(KEY) || null; }catch(e){ return null; } }
          var mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
          function systemTheme(){ return (mq && mq.matches) ? 'dark' : 'light'; }
          if(btn){
            btn.addEventListener('click', function(){
              var current = doc.getAttribute('data-theme') || systemTheme();
              var next = current==='dark' ? 'light' : 'dark';
              setTheme(next, true);
            });
          }
          if(mq && mq.addEventListener){
            mq.addEventListener('change', function(){
              if(!getStored()){ setTheme(systemTheme(), false); }
            });
          } else if(mq && mq.addListener){
            mq.addListener(function(){ if(!getStored()){ setTheme(systemTheme(), false); } });
          }
          setTheme(doc.getAttribute('data-theme') || systemTheme(), false);
        })();
        </script>
    </body>
</html>